%==============================================================================
% Beamer style for posters
% // based on 'cpbgposter' beamer theme //
%==============================================================================


\ProvidesPackage{beamerthemeMolSSI}


\RequirePackage{tikz}
\usetikzlibrary{arrows,decorations.pathmorphing,backgrounds,calc}
\RequirePackage{amsmath,amssymb}

\usepackage{fontspec}
\setmainfont{din-regular-opentype.otf}[
Path = ../fonts/,
BoldFont = dincond-bold-opentype.otf]

\usepackage{ragged2e}

% multicols
\usepackage{multicol}
\setlength{\columnsep}{80pt}

% captions
\usepackage[justification=justified,listformat=simple,format=plain,labelformat=simple]{caption}

% for logo path
\usepackage{url}
%
\graphicspath{{../figs/}{../logos/}{../logos/main_logo/}{../logos/university_logo/}}

%==============================================================================
% define basic colors 
%==============================================================================

  \definecolor{molssired}  {RGB}{237,28,36} %%% title color %%% MolSSI red
  \definecolor{molssiblack}  {RGB}{57,53,54} %%% boarder and colorbar color %%% MolSSI black
  \definecolor{black}  {RGB}{0,0,0} %%% text color
  \definecolor{white}  {RGB}{255,255,255} %%% background color

%==============================================================================
%
  \setbeamercolor{colorbar}{fg=molssiblack,bg=molssiblack}
  \setbeamercolor{normal text}{fg=black}

% background color
  \beamertemplatesolidbackgroundcolor{white}

%set the fonts
  \setbeamerfont{section in head/foot}{series=\bfseries}
  \setbeamerfont{block title}{series=\bfseries}
  \setbeamerfont{block alerted title}{series=\bfseries}
  \setbeamerfont{frametitle}{series=\bfseries}
  \setbeamerfont{frametitle}{size=\Large}
  \setbeamerfont{caption}{size=\normalsize}
  \setbeamerfont{caption name}{size=\normalsize}

%set some beamer theme options
  \setbeamertemplate{title page}[default][colsep=-4bp,rounded=true]
  \setbeamertemplate{sections/subsections in toc}[square]
  \setbeamertemplate{items}[circle]
  \setbeamertemplate{blocks}[width=0.0]
  \beamertemplatenavigationsymbolsempty
%set bibliography style
 \setbeamertemplate{bibliography item}[text]
 \setbeamercolor{bibliography item}{fg=black,bg=white}
 \setbeamercolor{bibliography entry author}{fg=black,bg=white}
 \setbeamerfont{bibliography item}{size=\small}
 \setbeamerfont{bibliography entry author}{size=\small}


%==============================================================================
% build the poster title
%==============================================================================
\setbeamertemplate{headline}{
 \leavevmode
  \rmfamily
  \begin{columns}
   \begin{column}{0.15\linewidth}
    \begin{center}
% replace with your institutions seal
     \includegraphics[width=0.55\linewidth]{{\instlogo}}
    \end{center}
   \end{column}
   \begin{column}{.7\linewidth}
    \vskip2cm
    \centering
    %\usebeamercolor{title in headline}
{\color{molssired} \textbf{\huge{\inserttitle}}\\[1ex]}
    \vskip 1.5cm
    %\usebeamercolor{author in headline}
{\color{fg} \Large{\insertauthor}\\[1ex]}
    %\usebeamercolor{institute in headline}
{\color{fg} \large{\insertinstitute}\\[1ex]}

{\color{fg} \large{\mentor}\\[1ex]}
        \vskip2cm
      \end{column}
       \begin{column}{.15\linewidth}
         \begin{center}
           \hspace{-8cm}
           \includegraphics[width=1.0\linewidth]{molssi_main}
         \end{center}
       \end{column}
        \vspace{1cm}
    \end{columns}

%%% additional bar under titles

\begin{beamercolorbox}[colsep=-2.8cm,ht=3.3cm]{colorbar}
\end{beamercolorbox}

}





%
%==============================================================================
% Section and subsection re-definitions
%==============================================================================

\renewcommand{\section}[1]{
\par\vskip\medskipamount%


     \begin{flushleft}
     %\vskip1cm
     {\textcolor{black}{\textbf{\Large #1}}}
     {\parskip0pt\par}
     \end{flushleft}
     \vspace{-1.0cm}
     \begin{beamercolorbox}[ht=0.2cm]{colorbar}
     \end{beamercolorbox}

  {\parskip0pt\par}
  \justifying
}

%%%
\renewcommand{\subsection}[1]{

     \begin{flushleft}
     %\vskip1cm
     {\textcolor{black}{\textbf{\Normal #1}}}
     {\parskip0pt\par}
     \end{flushleft}
     \vspace{-1.0cm}
     \begin{beamercolorbox}[ht=0.2cm]{colorbar}
     \end{beamercolorbox}
}

%==============================================================================

%==============================================================================
% build the poster boarder
%==============================================================================
\setbeamertemplate{background canvas}{
 \begin{tikzpicture}[remember picture,overlay]
   \draw [line width=1cm,molssiblack] (current page.south east) rectangle (current page.north west);
   \draw [line width=1cm,molssiblack] (current page.south east) rectangle (current page.north west);
 \end{tikzpicture}
}


